# 词法分析器

在编译器理解输入程序的三个过程中，词法分析是第一阶段。词法分析器读取字符流，并产生单词流。它聚合字符形成单词，并应用一组规则来判断每个单词在源语言中是否合法。如果单词有效，词法分析器会分配给它一个语法范畴或词类。

## 概念路线图

1. 识别器：识别器是在字符流中识别特定单词的程序。有限自动机是识别器的一种形式化方法。
2. 正则表达式：正则表达式是一种用于定义语法的形式记号。
3. 一组构造方法，用于将正则表达式转换为识别器。
4. 实现词法分析器的三种不同的方式：表驱动词法分析器、直接编码的词法分析器和手工编码方法。

## 识别单词

逐字符的词法分析方法会让算法清晰易懂。我们可以用转移图表示逐字符处理的词法分析器，转移图又相当于一个有限自动机。转移图分为无环和有环，无限集需要有环的转移图。<br>
对于需要实现转移图（transition diagram）的代码来说，转移图充当了这些代码的抽象。转移图还可以看作是形式化的数学对象，成为有限自动机，它定义了识别器的规格。<br>
形式上，有限自动机（FA）是一个五元数组(S, ∑, δ, s<sub>0</sub>, S<sub>A</sub>)，其中各分量的含义如下所示：
- S是识别器中的有限状态集，
- ∑是识别器中使用的有限字母表。通常，∑是转移图中边的标签的合集。
- δ(s, c)是识别器的转移函数。它将每个状态s ∈ S和每个字符c ∈ ∑的组合(s, c)映射到下一个状态。在状态s<sub>i</sub>遇到输入字符c，FA将采用转移s<sub>i</sub>→<sup>c</sup>δ(s<sub>i</sub>, c)。
- s<sub>0</sub> ∈ S是指定的起始状态。
- S<sub>A</sub>是接受状态的集合，S<sub>A</sub> ⊆ S。 S<sub>A</sub>中的每个状态都在转移图中表示为双层圆圈。

FA接受字符串的三种情况：
1. （正确）每个字符输入符合相应的状态转移，并在耗尽所有字符输入后处于接受状态。
2. （错误）FA在处理字符串时遇到错误——即某个字符x<sub>j</sub>可能使FA转移到错误状态s<sub>e</sub>。这种情况表明发生了词法错误。
3. （错误）FA耗尽其输入后，终止于s<sub>e</sub>之外的某个非接受状态。


## 正则表达式

有限自动机F所接受的单词的集合，形成了一种语言，记作L(F)。FA的转移图详细地定义了该语言，但转移图不够直观。对于任意FA，我们还可以使用一种称为正则表达式（Regular Expression, RE）的符号表示法来描述其语言。通过RE描述的语言称为正则语言。<br>
一个RE描述了一个定义在某个字母表∑上的字符串集合，外加一个表示空串的字符
